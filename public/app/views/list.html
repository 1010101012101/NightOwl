<div ng-controller="ListController">
	<div class="row" ng-controller="ListController">
		<div class="col-lg-12">
			<div ng-repeat="dc in config.dataCenters" class="btn-group">
				<button class="btn" ng-class="{active: filters.dataCenter == dc.value}" ng-click="filters.dataCenter = dc.value">{{dc.name}}</button>
			</div>
			<br/>
			<br/>
		</div>
	</div>

	<div class="row">
		<div class="col-lg-12">
			<form id="filter">
				<div class="form-inline">
					<div class="form-group">
						<select class="form-control" ng-model="filters.filterBy" ng-options="filter for filter in config.filters">
							<option value="">Filter Type</option>
						</select>
						<input class="form-control" type="text" ng-model="filters.filter">
					</div>
				</div>
				<input class="btn" type="submit" value="Filter" ng-click="reloadCodes()">
			</form>
		</div>
	</div>

	<div class="row">
		<div class="col-lg-12">
			<form id="create">
				<button class="btn" ng-hide="createMode" ng-click="createMode = true">Create New</button>
				<table ng-show="createMode" mg-model="newCode">
					<tr>
						<td class="listTable">Key</td>
						<td class="listTable">Restriction</td>
						<td class="listTable">Value</td>
						<td class="listTable">Description</td>
						<td class="listTable">Available to JS?</td>
					</tr>
					<tr>
						<td><input class="form-control" type="text" ng-model="newCode.key" /></td>
						<td>
							<select ng-model="newCode.restriction" ng-init="newCode.restriction = config.restrictions[0]"
							ng-options="restriction for restriction in config.restrictions">
						</select>
					</td>
					<td><input class="form-control" type="text" ng-model="newCode.value" ng-init="newCode.value = 0" /></td>
					<td><textarea class="form-control" ng-model="newCode.description"></textarea></td>
					<td><input class="form-control" type="checkbox" ng-model="newCode.availableToJS" ng-init="newCode.availableToJS = 0" /></td>
					<td><button type="btn" ng-click="createCode(newCode); createMode = false">Create</button></td>
				</tr>
			</table>
		</form>
	</div>
</div>
<div class="row" ng-show="launchCodes.length">
	<tabulate array="launchCodes" delete="test" edit="saveCode"></tabulate-mutable>
	<table>
		<thead>
			<tr>
				<td class="listTable">Key</td>
				<td class="listTable">Restriction</td>
				<td class="listTable">Value</td>
				<td class="listTable">Description</td>
				<td class="listTable">Available to JS</td>
			</tr>
		</thead>
		<tr ng-repeat="code in launchCodes" id="code-{{$index}}">
			<td class="listTable">{{ code.key }}<div style="font-size: 75%">{{ code.createdDate }}</div></td>
			<td class="listTable"><select class="form-control" ng-model="code.restriction" ng-options="restriction for restriction in config.restrictions" disabled></select></td>
			<td class="listTable"><input class="form-control" type="text" ng-model="code.value" disabled></td>
			<td class="listTable"><textarea class="form-control" ng-model="code.description" cols=50 disabled></textarea></td>
			<td class="listTable"><input class="form-control" type="checkbox" ng-checked="code.availableToJS == 'true'" ng-click="toggleJS(code)" disabled></td>
			<td ng-hide="inEditMode($index)">
				<button class="btn" ng-click="toggleEditMode($index)">Edit</button>
			</td>
			<td ng-show="inEditMode($index)">
				<button class="btn" ng-click="saveCode(code); toggleEditMode($index)">OK</button>
				<button class="btn" ng-click="discardChanges(code); toggleEditMode($index)">Cancel</button>
			</td>
			<td><button class="btn" ng-click="deleteCode(code)">Delete</button></td>
		</tr>
	</table>
</div>
</div>